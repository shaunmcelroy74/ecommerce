<h1 class="text-3xl font-bold mb-4">Thank you for your order!</h1>
<p class="mb-6">
  <strong>Order #<%= @order.id %></strong><br>
  Placed on <%= @order.created_at.strftime("%B %d, %Y at %I:%M %p") %>
</p>

<section class="mb-8">
  <h2 class="text-2xl font-semibold mb-2">Shipping To</h2>
  <p>
    <%= [@order.street, @order.city, @order.province.name, @order.postal_code].join(", ") %>
  </p>
</section>

<section class="mb-8">
  <h2 class="text-2xl font-semibold mb-2">Invoice</h2>
  <table class="w-full border-collapse mb-4">
    <thead>
      <tr class="bg-gray-100">
        <th class="p-2 text-left">Item</th>
        <th class="p-2 text-right">Unit Price</th>
        <th class="p-2 text-right">Qty</th>
        <th class="p-2 text-right">Tax</th>
        <th class="p-2 text-right">Total</th>
      </tr>
    </thead>
    <tbody>
      <% @order.order_products.each do |line| %>
        <tr>
          <td class="p-2"><%= line.product_name %></td>
          <td class="p-2 text-right"><%= number_to_currency(line.unit_price_cents / 100.0) %></td>
          <td class="p-2 text-right"><%= line.quantity %></td>
          <td class="p-2 text-right"><%= number_to_currency(line.tax_cents / 100.0) %></td>
          <td class="p-2 text-right">
            <%= number_to_currency((line.unit_price_cents * line.quantity + line.tax_cents) / 100.0) %>
          </td>
        </tr>
      <% end %>
    </tbody>
    <tfoot>
      <tr>
        <th colspan="4" class="p-2 text-right">Subtotal:</th>
        <td class="p-2 text-right"><%= number_to_currency(@order.subtotal_cents / 100.0) %></td>
      </tr>
      <tr>
        <th colspan="4" class="p-2 text-right">GST (<%= (@order.gst_rate * 100).round(2) %>%):</th>
        <td class="p-2 text-right"><%= number_to_currency(@order.gst_cents / 100.0) %></td>
      </tr>
      <tr>
        <th colspan="4" class="p-2 text-right">PST (<%= (@order.pst_rate * 100).round(2) %>%):</th>
        <td class="p-2 text-right"><%= number_to_currency(@order.pst_cents / 100.0) %></td>
      </tr>
      <tr>
        <th colspan="4" class="p-2 text-right">HST (<%= (@order.hst_rate * 100).round(2) %>%):</th>
        <td class="p-2 text-right"><%= number_to_currency(@order.hst_cents / 100.0) %></td>
      </tr>
      <tr>
        <th colspan="4" class="p-2 text-right font-bold">Grand Total:</th>
        <td class="p-2 text-right font-bold"><%= number_to_currency(@order.grand_total_cents / 100.0) %></td>
      </tr>
    </tfoot>
  </table>
</section>

<div class="flex space-x-4">
  <%= link_to "Back to Shop",
        root_path,
        class: "inline-block px-4 py-2 bg-gray-200 rounded hover:bg-gray-300" %>

  <%= button_to "Pay Now",
      payments_path(order_id: @order.id),
      method: :post,
      form: { data: { turbo: false } },
      class: "px-4 py-2 bg-green-600 text-white rounded hover:bg-green-500" %>
